; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 91
; Schema: 0
               OpCapability Shader
               OpCapability ShaderNonUniform
               OpCapability RuntimeDescriptorArray
               OpCapability SampledImageArrayNonUniformIndexing
               OpExtension "SPV_EXT_descriptor_indexing"
               OpExtension "SPV_KHR_non_semantic_info"
          %1 = OpExtInstImport "NonSemantic.Shader.DebugInfo.100"
          %3 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Fragment %main "main" %outColor %fragColor %fragTexCoord
               OpExecutionMode %main OriginUpperLeft
          %2 = OpString "C:\\Users\\Adams Humbert\\Documents\\Clion\\MadnessEngine\\renderer\\shaders\\text.frag"
          %8 = OpString "uint"
         %16 = OpString "main"
         %19 = OpString "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450

#extension GL_EXT_nonuniform_qualifier : require

layout (set = 1, binding = 0) uniform sampler2D texture_samples[];

layout(location = 0) in vec3 fragColor;
layout(location = 1) in vec2 fragTexCoord;


layout(location = 0) out vec4 outColor;

void main() {
    //outColor = vec4(fragColor, 1.0);
    //outColor = vec4(fragTexCoord, 0.0, 1.0); // useful for debugging
    //outColor = texture(texSampler, fragTexCoord);
    outColor = vec4(fragColor, 1.0) * texture(texture_samples[(nonuniformEXT(0))], fragTexCoord); // if we want colors overlayed

    //creates greyish outline, but looks bad
    //vec4 texel = texture(texSampler, fragTexCoord);      // sample atlas RGBA
    //float alpha = texel.a;                               // use alpha channel
    //vec3 rgb   = fragColor * alpha;                      // premultiply tint
    //outColor   = vec4(rgb, alpha);

}"
         %29 = OpString "float"
         %37 = OpString "outColor"
         %46 = OpString "fragColor"
         %56 = OpString "type.2d.image"
         %57 = OpString "@type.2d.image"
         %61 = OpString "type.sampled.image"
         %62 = OpString "@type.sampled.image"
         %69 = OpString "texture_samples"
         %71 = OpString "int"
         %85 = OpString "fragTexCoord"
               OpSourceExtension "GL_EXT_nonuniform_qualifier"
               OpName %main "main"
               OpName %outColor "outColor"
               OpName %fragColor "fragColor"
               OpName %texture_samples "texture_samples"
               OpName %fragTexCoord "fragTexCoord"
               OpDecorate %outColor Location 0
               OpDecorate %fragColor Location 0
               OpDecorate %texture_samples Binding 0
               OpDecorate %texture_samples DescriptorSet 1
               OpDecorate %74 NonUniform
               OpDecorate %77 NonUniform
               OpDecorate %78 NonUniform
               OpDecorate %fragTexCoord Location 1
       %void = OpTypeVoid
          %5 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
    %uint_32 = OpConstant %uint 32
     %uint_6 = OpConstant %uint 6
     %uint_0 = OpConstant %uint 0
          %9 = OpExtInst %void %1 DebugTypeBasic %8 %uint_32 %uint_6 %uint_0
     %uint_3 = OpConstant %uint 3
          %6 = OpExtInst %void %1 DebugTypeFunction %uint_3 %void
         %18 = OpExtInst %void %1 DebugSource %2 %19
    %uint_13 = OpConstant %uint 13
     %uint_1 = OpConstant %uint 1
     %uint_4 = OpConstant %uint 4
     %uint_2 = OpConstant %uint 2
         %21 = OpExtInst %void %1 DebugCompilationUnit %uint_1 %uint_4 %18 %uint_2
         %17 = OpExtInst %void %1 DebugFunction %16 %6 %18 %uint_13 %uint_0 %21 %16 %uint_3 %uint_13
      %float = OpTypeFloat 32
         %30 = OpExtInst %void %1 DebugTypeBasic %29 %uint_32 %uint_3 %uint_0
    %v4float = OpTypeVector %float 4
         %32 = OpExtInst %void %1 DebugTypeVector %30 %uint_4
%_ptr_Output_v4float = OpTypePointer Output %v4float
         %34 = OpExtInst %void %1 DebugTypePointer %32 %uint_3 %uint_0
   %outColor = OpVariable %_ptr_Output_v4float Output
    %uint_17 = OpConstant %uint 17
     %uint_8 = OpConstant %uint 8
         %36 = OpExtInst %void %1 DebugGlobalVariable %37 %32 %18 %uint_17 %uint_0 %21 %37 %outColor %uint_8
    %v3float = OpTypeVector %float 3
         %41 = OpExtInst %void %1 DebugTypeVector %30 %uint_3
%_ptr_Input_v3float = OpTypePointer Input %v3float
         %43 = OpExtInst %void %1 DebugTypePointer %41 %uint_1 %uint_0
  %fragColor = OpVariable %_ptr_Input_v3float Input
         %45 = OpExtInst %void %1 DebugGlobalVariable %46 %41 %18 %uint_17 %uint_0 %21 %46 %fragColor %uint_8
    %float_1 = OpConstant %float 1
         %54 = OpTypeImage %float 2D 0 0 0 1 Unknown
         %58 = OpExtInst %void %1 DebugInfoNone
         %55 = OpExtInst %void %1 DebugTypeComposite %56 %uint_0 %18 %uint_17 %uint_0 %21 %57 %58 %uint_3
         %59 = OpTypeSampledImage %54
         %60 = OpExtInst %void %1 DebugTypeComposite %61 %uint_0 %18 %uint_17 %uint_0 %21 %62 %58 %uint_3
%_runtimearr_59 = OpTypeRuntimeArray %59
         %64 = OpExtInst %void %1 DebugTypeArray %60 %uint_0
%_ptr_UniformConstant__runtimearr_59 = OpTypePointer UniformConstant %_runtimearr_59
         %66 = OpExtInst %void %1 DebugTypePointer %64 %uint_0 %uint_0
%texture_samples = OpVariable %_ptr_UniformConstant__runtimearr_59 UniformConstant
         %68 = OpExtInst %void %1 DebugGlobalVariable %69 %64 %18 %uint_17 %uint_0 %21 %69 %texture_samples %uint_8
        %int = OpTypeInt 32 1
         %72 = OpExtInst %void %1 DebugTypeBasic %71 %uint_32 %uint_4 %uint_0
      %int_0 = OpConstant %int 0
%_ptr_UniformConstant_59 = OpTypePointer UniformConstant %59
         %76 = OpExtInst %void %1 DebugTypePointer %60 %uint_0 %uint_0
    %v2float = OpTypeVector %float 2
         %80 = OpExtInst %void %1 DebugTypeVector %30 %uint_2
%_ptr_Input_v2float = OpTypePointer Input %v2float
         %82 = OpExtInst %void %1 DebugTypePointer %80 %uint_1 %uint_0
%fragTexCoord = OpVariable %_ptr_Input_v2float Input
         %84 = OpExtInst %void %1 DebugGlobalVariable %85 %80 %18 %uint_17 %uint_0 %21 %85 %fragTexCoord %uint_8
    %uint_25 = OpConstant %uint 25
       %main = OpFunction %void None %5
         %15 = OpLabel
         %26 = OpExtInst %void %1 DebugScope %17
         %27 = OpExtInst %void %1 DebugLine %18 %uint_13 %uint_13 %uint_0 %uint_0
         %25 = OpExtInst %void %1 DebugFunctionDefinition %17 %main
         %48 = OpExtInst %void %1 DebugLine %18 %uint_17 %uint_17 %uint_0 %uint_0
         %47 = OpLoad %v3float %fragColor
         %50 = OpCompositeExtract %float %47 0
         %51 = OpCompositeExtract %float %47 1
         %52 = OpCompositeExtract %float %47 2
         %53 = OpCompositeConstruct %v4float %50 %51 %52 %float_1
         %74 = OpCopyObject %int %int_0
         %77 = OpAccessChain %_ptr_UniformConstant_59 %texture_samples %74
         %78 = OpLoad %59 %77
         %86 = OpLoad %v2float %fragTexCoord
         %87 = OpImageSampleImplicitLod %v4float %78 %86
         %88 = OpFMul %v4float %53 %87
               OpStore %outColor %88
         %89 = OpExtInst %void %1 DebugLine %18 %uint_25 %uint_25 %uint_0 %uint_0
               OpReturn
               OpFunctionEnd
